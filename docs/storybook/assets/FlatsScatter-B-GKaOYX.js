import{j as r}from"./jsx-runtime-D_zvdyIk.js";import{r as z}from"./iframe-D4hbvkVB.js";import{_ as n}from"./createSimplePaletteValueFilter-Ccc1faLV.js";import{_ as w}from"./mergeSlotProps-DnV3t0J5.js";import{u as W,a as _,s as O,b as N,c as X,d as Z,g as $,e as Y,f as q,h as B,i as J,j as U,k as K,l as Q,m as ss,n as es,o as ts,p as rs,q as os,r as is,t as as,C as ns,v as cs,w as ls,x as ds,y as hs,z as xs,A as ps,B as gs,D as us,E as ms}from"./ChartsToolbar-9axDz2a5.js";import{a as Cs}from"./Portal-CsH-Yoge.js";function Is(){const e=W(),s=_(e,O),t=_(e,N);return{isHighlighted:s,isFaded:t}}const Ps=e=>e.voronoi,Ss=X(Ps,e=>e==null?void 0:e.isVoronoiEnabled),As=["seriesId","isFaded","isHighlighted","x","y","color","size","dataIndex"];function fs(e){const{isFaded:s,isHighlighted:t,x:o,y:i,color:h,size:p}=e,c=w(e,As);return r.jsx("circle",n({cx:0,cy:0,r:(t?1.2:1)*p,transform:`translate(${o}, ${i})`,fill:h,opacity:s?.3:1,cursor:c.onClick?"pointer":"unset"},c))}const ys=["ownerState"];function js(e){const{series:s,xScale:t,yScale:o,color:i,colorGetter:h,onItemClick:p,slots:c,slotProps:m}=e,{instance:I}=Z(),y=W(),j=_(y,Ss)||s.disableHover,{isFaded:d,isHighlighted:g}=Is(),S=z.useMemo(()=>{const a=$(t),b=$(o),f=[];for(let u=0;u<s.data.length;u+=1){const H=s.data[u],k=a(H.x),T=b(H.y);if(I.isPointInside(k,T)){const v={seriesId:s.id,dataIndex:u},F=g(v);f.push({x:k,y:T,isHighlighted:F,isFaded:!F&&d(v),id:H.id,seriesId:s.id,type:"scatter",dataIndex:u,color:h?h(u):i})}}return f},[t,o,s.data,s.id,g,d,h,i,I]),x=Y(S,j),l=(c==null?void 0:c.marker)??fs,A=Cs({elementType:l,externalSlotProps:m==null?void 0:m.marker,additionalProps:{seriesId:s.id,size:s.markerSize},ownerState:{}}),C=w(A,ys);return r.jsx("g",{children:S.map((a,b)=>r.jsx(l,n({dataIndex:a.dataIndex,color:a.color,isHighlighted:a.isHighlighted,isFaded:a.isFaded,x:a.x,y:a.y,onClick:p&&(f=>p(f,{type:"scatter",seriesId:s.id,dataIndex:a.dataIndex}))},x[b],C),a.id??a.dataIndex))})}B("scatter");const bs=q("scatter");function Hs(){return bs()}function ks(e){const{slots:s,slotProps:t,onItemClick:o}=e,i=Hs(),{xAxis:h,xAxisIds:p}=J(),{yAxis:c,yAxisIds:m}=U(),{zAxis:I,zAxisIds:y}=K();if(i===void 0)return null;const{series:P,seriesOrder:j}=i,d=p[0],g=m[0],S=y[0],x=(s==null?void 0:s.scatter)??js;return r.jsx(z.Fragment,{children:j.map(l=>{const{id:A,xAxisId:C,yAxisId:a,zAxisId:b,color:f}=P[l],u=Q(P[l],h[C??d],c[a??g],I[b??S]),H=h[C??d].scale,k=c[a??g].scale;return r.jsx(x,n({xScale:H,yScale:k,color:f,colorGetter:u,series:P[l],onItemClick:o,slots:s,slotProps:t},t==null?void 0:t.scatter),A)})})}const Ts=[ss,es,ts,rs,os],vs=["xAxis","yAxis","zAxis","series","axisHighlight","voronoiMaxRadius","disableVoronoi","hideLegend","width","height","margin","colors","sx","grid","onItemClick","children","slots","slotProps","loading","highlightedItem","onHighlightChange","className","showToolbar"],Fs=e=>{var E,M,D,R;const{xAxis:s,yAxis:t,zAxis:o,series:i,axisHighlight:h,voronoiMaxRadius:p,disableVoronoi:c,width:m,height:I,margin:y,colors:P,sx:j,grid:d,onItemClick:g,children:S,slots:x,slotProps:l,loading:A,highlightedItem:C,onHighlightChange:a,className:b}=e,f=w(e,vs),u=z.useMemo(()=>i.map(L=>n({type:"scatter"},L)),[i]),H=n({},f,{series:u,width:m,height:I,margin:y,colors:P,xAxis:s,yAxis:t,zAxis:o,highlightedItem:C,onHighlightChange:a,disableVoronoi:c,voronoiMaxRadius:p,onItemClick:c?void 0:g,className:b,plugins:Ts,slots:x,slotProps:l}),k={slots:x,slotProps:l},T={vertical:d==null?void 0:d.vertical,horizontal:d==null?void 0:d.horizontal},V={onItemClick:c?g:void 0,slots:x,slotProps:l},v={loading:A,slots:x,slotProps:l},F={slots:x,slotProps:l},G=n({y:"none",x:"none"},h);return{chartsWrapperProps:{sx:j,legendPosition:(M=(E=e.slotProps)==null?void 0:E.legend)==null?void 0:M.position,legendDirection:(R=(D=e.slotProps)==null?void 0:D.legend)==null?void 0:R.direction},chartContainerProps:H,chartsAxisProps:k,gridProps:T,scatterPlotProps:V,overlayProps:v,legendProps:F,axisHighlightProps:G,children:S}},zs=z.forwardRef(function(s,t){var l,A,C;const o=is({props:s,name:"MuiScatterChart"}),{chartsWrapperProps:i,chartContainerProps:h,chartsAxisProps:p,gridProps:c,scatterPlotProps:m,overlayProps:I,legendProps:y,axisHighlightProps:P,children:j}=Fs(o),{chartDataProviderProps:d,chartsSurfaceProps:g}=as(h,t),S=((l=o.slots)==null?void 0:l.tooltip)??ns,x=((A=o.slots)==null?void 0:A.toolbar)??cs;return r.jsx(ls,n({},d,{children:r.jsxs(ds,n({},i,{children:[o.showToolbar?r.jsx(x,{}):null,!o.hideLegend&&r.jsx(hs,n({},y)),r.jsxs(xs,n({},g,{children:[r.jsx(ps,n({},p)),r.jsx(gs,n({},c)),r.jsx("g",{"data-drawing-container":!0,children:r.jsx(ks,n({},m))}),r.jsx(us,n({},I)),r.jsx(ms,n({},P)),j]})),!o.loading&&r.jsx(S,n({trigger:"item"},(C=o.slotProps)==null?void 0:C.tooltip))]}))}))});function _s({data:e,axisX:s,axisY:t}){if(!e||e.length===0||!s||!t)return r.jsx("div",{children:"Нет данных для отображения графика"});const o=e.map(i=>({x:i[s],y:i[t],id:i.id||Math.random().toString(36).substring(7)}));return r.jsx("div",{style:{width:"100%",height:"400px"},children:r.jsx(zs,{series:[{data:o,label:`${t} vs ${s}`,color:"#1976d2"}],xAxis:[{label:s,valueFormatter:i=>`${i}`}],yAxis:[{label:t}],width:600,height:400,margin:{top:20,right:30,left:70,bottom:70}})})}_s.__docgenInfo={description:`Компонент точечной диаграммы для визуализации зависимости между двумя параметрами квартир\r
\r
@component\r
@param {Object} props - Пропсы компонента\r
@param {Array} props.data - Массив объектов с данными о квартирах\r
@param {string} props.axisX - Название параметра для оси X (ключ в объекте данных)\r
@param {string} props.axisY - Название параметра для оси Y (ключ в объекте данных)\r
@returns {JSX.Element} Точечная диаграмма или сообщение об отсутствии данных`,methods:[],displayName:"FlatScatter"};export{_s as F};
